name: Deploy Prefect flows (prod)

on:
  push:
    branches:
      - master
    paths:
      - pipelines/**
  workflow_dispatch:

jobs:
  deploy-prefect-prod-flows:
    name: Deploy Prefect prod flows
    runs-on: ubuntu-latest
    steps:
      - name: Deploy Prefect flows
        uses: ./.github/actions/deploy-prefect-flows
        with:
          environment: prod
          pipelines_path: ./pipelines
          prefect_api_url: https://prefect.squirrel-regulus.ts.net/api
          ts_tags: tag:prefect-cicd
